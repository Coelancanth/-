

----------------------------QUESTGIVER

[DialogNode] ID=questgiver;
animations=;
statements=Any business with the guild?;


[DialogOption] text=Job Complete!;
--generic turning a quest in to the questgiver
formulaReq=g:questCompleted + gIsTalker:questGiver - 1 - gIs:questType,clearden;
nodeToConnectTo=questgiver_job_complete;

[DialogOption] text=Den cleared!;
--cleared monster den and at original questGiver
formulaReq=gIs:questType,clearden + g:questCompleted + gIsTalker:questGiver - 2;
nodeToConnectTo=questgiver_job_complete_clearden;

[DialogOption] text=Deliver letter;
--if you're delivering letter and this is the right location for it
formulaReq=gIs:questType,letter + gIsLocID:questGoal - 1 - g:questRoyal * 999999;
newLineOfOptions=true;
nodeToConnectTo=questgiver_job_complete_letter;

[DialogOption] text=Deliver cargo;
--if you have enough cargo and you're back at the original questGiver
formulaReq=gIs:questType,cargo + gIsTalker:questGiver + cargoItem_g:questGoal:10 - 2 - g:questRoyal * 999999;
newLineOfOptions=true;
nodeToConnectTo=questgiver_job_complete_cargo;

[DialogOption] text=Deliver cargo?;
--if you DON'T have enough cargo
formulaReq=gIs:questType,cargo + gIsTalker:questGiver + cargoItem_g:questGoal:1 - cargoItem_g:questGoal:10*100 - 2 - g:questRoyal * 999999;
newLineOfOptions=true;
nodeToConnectTo=questgiver_job_not_enough_cargo;

[DialogOption] text=Defeated enemy!;
--if you beat the fleet and at any questgiver
formulaReq=gIs:questType,defeat * 100000 + g_gID:fleetsDefeated_:questGoal - g:questStartNum - 100000 - g:questRoyal * 999999;
newLineOfOptions=true;
nodeToConnectTo=questgiver_job_complete_defeat;
[DialogOption] text=Monster slain!;
--if you slay a monster and at any questgiver
formulaReq=gIs:questType,slay * 100000 + kills_g:questGoal - g:questStartNum - 100000 - g:questRoyal * 999999;
newLineOfOptions=true;
nodeToConnectTo=questgiver_job_complete_slay;

[DialogOption] text=Deliver lost cargo;
--if you have the lost cargo and you're back at the original questGiver
formulaReq=gIs:questType,salvage + gIsTalker:questGiver + cargoItem:cargo_lost:1 - 2 - g:questRoyal * 999999;
newLineOfOptions=true;
nodeToConnectTo=questgiver_job_salvage;

[DialogOption] text=Jobs;
formulaReq=gIs0:questCompleted - gIsString:questType;
newLineOfOptions=true;
specialEffect=jobDialogOptions,questgiver_jobs;
nodeToConnectTo=questgiver_jobs;
--busy with uncompleted quest
[DialogOption] text=Jobs;
newLineOfOptions=true;
formulaReq=gIs0:questCompleted + gIsString:questType - 1;
nodeToConnectTo=questgiver_jobs_already_busy;
--busy with completed, but not turned in, royal quest
[DialogOption] text=Jobs;
newLineOfOptions=true;
formulaReq=gIs1:questCompleted + gIsString:questType + g:questRoyal - 2;
nodeToConnectTo=questgiver_jobs_already_busy;

[DialogOption] text=Goodbye;
nodeToConnectTo=;
bottomOption=true;

--

[DialogNode] ID=questgiver_jobs_already_busy;
animations=sigh;
animations=;
statements=Don't you already have a job you should be doing?;
statements='<g=questLog>', wasn't it?;
nextNodeID=;
[DialogOption] text=Cancel job;
formulaReq=1 - g:questRoyal;
nodeToConnectTo=questgiver_jobs_cancel;
[DialogOption] text=Cancel job;
formulaReq=g:questRoyal;
nodeToConnectTo=questgiver_jobs_cant_cancel;
[DialogOption] text=Nevermind;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=questgiver_job_not_enough_cargo;
animations=sigh;
statements=Sorry, but you're a bit short. We need 10 of them, but you only have <math=cargoItem_g:questGoal><adjX=-4>.;
nextNodeID=;

---

[DialogNode] ID=questgiver_jobs;
animations=;
statements=Here's what we have available.;


--JOB COMPLETE

[DialogNode] ID=questgiver_job_complete;
animations=;
statements=<g=questLog>? Ah, I see.;
statements=Well done. Here's your pay - $<math=g:questReward><adjX=-6>.;
specialEffect=fx,sfx_questComplete;
specialEffect=giveGlobalVarGP,questReward;
specialEffect=modFame,trade,10;
nextNodeID=questgiver_job_complete2;

[DialogNode] ID=questgiver_job_complete_letter;
animations=;
statements=<g=questLog>? Ah, I see.;
statements=Well done. Here's your pay - $<math=g:questReward><adjX=-6>.;
specialEffect=fx,sfx_questComplete;
specialEffect=giveGlobalVarGP,questReward;
specialEffect=modFame,trade,10;
specialEffect=modGlobalVar,questComplete_letter,1;
nextNodeID=questgiver_job_complete2;

[DialogNode] ID=questgiver_job_complete_cargo;
animations=;
statements=<g=questLog>, eh?;
statements=Good job. Here's the $<math=g:questReward><adjX=-6> reward for the delivery.;
specialEffect=fx,sfx_questComplete;
specialEffect=giveGlobalVarGP,questReward;
specialEffect=removeCargo_g,questGoal,10;
specialEffect=modFame,trade,20;
specialEffect=modGlobalVar,questComplete_cargo,1;
nextNodeID=questgiver_job_complete2;

[DialogNode] ID=questgiver_job_salvage;
animations=;
statements=You found the lost cargo?<p> Excellent!;
statements=Very well done!<p> Here's your $<math=g:questReward><adjX=-6> reward.;
specialEffect=fx,sfx_questComplete;
specialEffect=giveGlobalVarGP,questReward;
specialEffect=removeCargo,cargo_lost,99;
specialEffect=modFame,trade,5;
specialEffect=modFame,explore,20;
specialEffect=modGlobalVar,questComplete_salvage,1;
nextNodeID=questgiver_job_complete2;

[DialogNode] ID=questgiver_job_complete_defeat;
animations=;
statements=<g=questLog>, eh?;
statements=Very impressive! Here's your $<math=g:questReward><adjX=-6> reward for making the seas safer.;
specialEffect=fx,sfx_questComplete;
specialEffect=giveGlobalVarGP,questReward;
specialEffect=modFame,trade,5;
specialEffect=modFame,combat,10;
specialEffect=modGlobalVar,questComplete_defeat,1;
nextNodeID=questgiver_job_complete2;

[DialogNode] ID=questgiver_job_complete_slay;
animations=;
statements=<g=questLog>?;
statements=That's no small feat! Here's your $<math=g:questReward><adjX=-6> reward for making the seas safer.;
specialEffect=fx,sfx_questComplete;
specialEffect=giveGlobalVarGP,questReward;
specialEffect=modFame,trade,5;
specialEffect=modFame,combat,10;
specialEffect=modGlobalVar,questComplete_slay,1;
nextNodeID=questgiver_job_complete2;


[DialogNode] ID=questgiver_job_complete_clearden;
animations=;
statements=<g=questLog>? Very good.;
statements=Well done. Here's your pay - $<math=g:questReward><adjX=-6>!;
specialEffect=fx,sfx_questComplete;
specialEffect=giveGlobalVarGP,questReward;
specialEffect=modFame,trade,5;
specialEffect=modGlobalVar,questComplete_clearden,1;
nextNodeID=questgiver_job_complete2;



[DialogNode] ID=questgiver_job_complete2;
statements=The guild thanks you for your hard work.;
specialEffect=cleanUpQuest;
specialEffect=refreshLocQuests;

[DialogOption] text=Jobs;
formulaReq=g:questCompleted - gIsTalker:questGiver;
newLineOfOptions=true;
nodeToConnectTo=questgiver_jobs_already_busy;

--CANCEL JOB

[DialogNode] ID=questgiver_jobs_cancel;
animations=sigh;
animations=;
statements=Are you sure?;
statements=If you're certain you can't do the job, you can cancel... but you'll be required to pay a $20 fee before you can take on new jobs.;
[DialogOption] text=Cancel ($20);
formulaReq=m:money - 19;
nodeToConnectTo=questgiver_jobs_cancel_confirm;
[DialogOption] text=<color=SlateGray>(Can't afford...);
formulaReq=20-m:money;
nodeToConnectTo=questgiver;
[DialogOption] text=Nevermind;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=questgiver_jobs_cant_cancel;
animations=scared;
animations=sigh;
statements=Hold on, now!<p=> That job is way too important.<p=> I can't cancel it!;
statements=If you really want to give up on it, you'll have to take it up with them yourself.;
nextNodeID=;

[DialogNode] ID=questgiver_jobs_cancel_confirm;
animations=sigh;
statements=Understood. I'll file the necessary paperwork.;
specialEffect=subtract20gp;
specialEffect=cancelQuest;
specialEffect=removeCargo,cargo_lost,99;
nextNodeID=questgiver;



---------------------OVERRIDES


[DialogNodeOverride] ID=questgiver_royal_summons_seartial;
dialogNodeID_toOverride=questgiver;
completeOverride=false;
overrideSpecialEffects=false;
fReq=gIsString:royalQuestType + gIs:playerFaction,seartial - 1 - g:questRoyal * 100 - gTimeSinceLessThan:questComplete_r:20 * 1000;
animations=;
statements=<pnamefull=> - the <color=DarkRed>Council of Seartial<color=> wants to meet with you.;
specialEffect=setGlobalVar,royalSummons,1;

[DialogNodeOverride] ID=questgiver_royal_summons_jasce;
dialogNodeID_toOverride=questgiver;
completeOverride=false;
overrideSpecialEffects=false;
fReq=gIsString:royalQuestType + gIs:playerFaction,jasce - 1 - g:questRoyal * 100 - gTimeSinceLessThan:questComplete_r:20 * 1000;
animations=;
statements=<pnamefull=> - did you know <color=DarkRed>Jasce<color=> wants to meet with you?;
specialEffect=setGlobalVar,royalSummons,1;

[DialogNodeOverride] ID=questgiver_royal_summons_rumane;
dialogNodeID_toOverride=questgiver;
completeOverride=false;
overrideSpecialEffects=false;
fReq=gIsString:royalQuestType + gIs:playerFaction,rumane - 1 - g:questRoyal * 100 - gTimeSinceLessThan:questComplete_r:20 * 1000;
animations=;
statements=<pnamefull=>, did you know the <color=DarkRed>King of Rumane<color=> is looking for you?;
specialEffect=setGlobalVar,royalSummons,1;



