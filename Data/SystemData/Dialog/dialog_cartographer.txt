

-------------------------------------CARTOGRAPHER

[DialogNode] ID=cartographer;
animations=;
statements=<finalTextIf=You're that famous explorer! Well done on your cartography work! Although I do wish you had worked for me instead...=g:mapCompleted><textIf=Welcome. Anything new to report?=gIsTalker:cartographerContractID><textIf=Well met. Are you looking to work for a cartographer?=1-gIsTalker:cartographerContractID>;
[DialogOption] text=Contract;
--rebuke if you already have a contract with another cartographer
formulaReq=gIsString:cartographerContractID - gIsTalker:cartographerContractID;
nodeToConnectTo=cartographer_contract_withAnother;
[DialogOption] text=Contract;
--form a new contract
formulaReq=1 - gIsString:cartographerContractID;
nodeToConnectTo=cartographer_contract;
[DialogOption] text=Report;
--can only report if you have a contract and haven't completed world map
formulaReq=gIsTalker:cartographerContractID - gIs1:mapPercentPaid;
nodeToConnectTo=cartographer_report;
specialEffect=cartographer_report,cartographer_report;
[DialogOption] text=Terminate;
--end contract
newLineOfOptions=true;
formulaReq=gIsTalker:cartographerContractID;
nodeToConnectTo=cartographer_contract_terminate;
[DialogOption] text=Goodbye;
nodeToConnectTo=;
bottomOption=true;

[DialogNode] ID=cartographer_report;
animations=;
statements=;

--CONTRACT

[DialogNode] ID=cartographer_contract;
animations=;
animations=;
animations=sly;
animations=sigh;
animations=;
statements=So you'd like to do cartography for me?;
statements=If we form a contract, I'll pay you whenever you fill out more of your map.;
statements=Remember, your mapwork is only to be shared with me.;
statements=You can terminate the contract if you change your mind (for a small fee), but even then, you cannot share anything sold to me with other cartographers.;
statements=Does this sound agreeable?;

[DialogOption] text=Yes;
nodeToConnectTo=cartographer_contract_yes;
[DialogOption] text=No;
nodeToConnectTo=cartographer_contract_no;

[DialogNode] ID=cartographer_contract_yes;
animations=happy;
animations=;
statements=Excellent! I look forward to working with you.;
statements=Stop by any time to report on your progress.;
specialEffect=setGlobalVarToTalkerID,cartographerContractID;
specialEffect=setGlobalVarToLocID,cartographerContractLoc;
specialEffect=fx,sfx_positiveNote2;
nextNodeID=;


[DialogNode] ID=cartographer_contract_no;
animations=;
statements=Alright, then. Come back if you change your mind.;
nextNodeID=;

[DialogNode] ID=cartographer_contract_withAnother;
animations=angry;
animations=sigh;
statements=You already have a contract with another cartographer!;
statements=Go terminate your contract with them first if you really want to work for me.;
nextNodeID=;

--TERMINATE CONTRACT

[DialogNode] ID=cartographer_contract_terminate;
animations=sigh;
animations=;
statements=So... you no longer wish to work for me?;
statements=I understand.<p=3> Of course, per our agreement, you'll have to pay a one-time fee of $300 to be released.;
nextNodeID=;
[DialogOption] text=Nevermind;
nodeToConnectTo=cartographer_contract_terminate_no;
[DialogOption] text=Pay ($300);
newLineOfOptions=true;
formulaReq=m:money - 299;
nodeToConnectTo=cartographer_contract_terminate_yes;
[DialogOption] text=<color=SlateGray>(Can't afford...);
newLineOfOptions=true;
formulaReq=300 - m:money;
nodeToConnectTo=cartographer_contract_terminate_no;

[DialogNode] ID=cartographer_contract_terminate_yes;
animations=;
specialEffect=subtract300gp;
specialEffect=setGlobalVarTo0,cartographerContractID;
specialEffect=setGlobalVarTo0,cartographerContractLoc;
statements=Alright. I'll take that $300, then...;
statements=It's been a pleasure working with you. Best of luck.;
nextNodeID=;

[DialogNode] ID=cartographer_contract_terminate_no;
animations=sigh;
statements=Well then. I'll just forget you mentioned it.;
nextNodeID=;

--

[DialogNode] ID=cartographer_completed;
animations=happy;
statements=Welcome!<p> How are you, friend?<p> Make yourself at home!;
nextNodeID=;

